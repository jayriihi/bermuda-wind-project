{% extends "base.html" %}

{% block title %}Session data page{% endblock %}

{% block content %}
<style>
  .page-wrap { max-width: var(--page-max, 1100px); margin: 0 auto; padding: 20px; }
  .card-dark {
    background: var(--panel, #0f2238);
    color: var(--panel-text, #e6eef8);
    border: 1px solid var(--panel-stroke, rgba(255,255,255,.14));
    border-radius: var(--radius, 12px);
    box-shadow: 0 6px 20px rgba(0,0,0,.25);
    padding: clamp(16px, 3vw, 28px);
  }
  .card-dark h2 { margin: 0 0 10px; font-size: clamp(20px, 2.2vw, 26px); }
  .sub { opacity:.85; font-size:.95rem; margin-bottom: 12px; }
  .form-row { display: grid; gap: 10px; justify-items: center; margin: 14px 0; }
  .form-row label { width: 100%; max-width: 460px; font-weight: 600; opacity:.9; }
  .form-row .form-control {
    width: 100%;
    max-width: 460px;
    height: 42px;
    padding: 8px 12px;
    border-radius: 10px;
  }
  /* inline selects for the duration wheel */
  .inline-selects {
    display:flex; gap:.5rem; width:100%; max-width:460px;
  }
  .actions { display:flex; justify-content:center; margin-top:18px; }
  .btn-primary {
    background: var(--aqua, #00e1d1);
    color: #06202b;
    border: none;
    border-radius: 10px;
    padding: 10px 16px;
    font-weight: 700;
  }

  /* Compact mobile sizing like wind_tide */
.page-wrap{ padding:14px; }
.card-dark{ padding:16px; }
.card-dark h2{ font-size:20px; margin-bottom:6px; }
.sub{ font-size:.9rem; margin-bottom:8px; }

.form-row{ margin:12px 0; }
.form-row label{ width:100%; max-width:460px; font-weight:600; opacity:.9; }
.form-control{
  width:100%;
  max-width:460px;
  height:42px;           /* ensure consistent input height */
  padding:8px 12px;
  border-radius:10px;
}

/* “Wheel” selects side-by-side, same width as inputs */
.inline-selects{
  display:flex; gap:.5rem;
  width:100%; max-width:460px;
}
.inline-selects .form-control{
  max-width:none;        /* let flex size them evenly */
}

/* Slightly roomier on tablet/desktop */
@media (min-width: 641px){
  .card-dark{ padding: clamp(18px, 2vw, 24px); }
  .form-control{ max-width:540px; }
  .inline-selects{ max-width:540px; }
}

</style>

<div class="page-wrap">
  <div class="card-dark">
    <h2>Welcome wind fanatics!!</h2>
    <div class="sub">Enter your session details below</div>

    <!-- Single, valid form posting to the results route -->
    <form method="post" action="{{ url_for('windput') }}">
      <div class="form-row">
        <label for="sessiondatetime">Date &amp; start time</label>
        <input type="datetime-local"
               class="form-control"
               id="sessiondatetime"
               name="sessiondatetime"
			   step="60"
			   required                 
               placeholder="mm/dd/yyyy, hh:mm am/pm">
      </div>

      <!-- Duration: desktop/mobile wheel -->
      <div class="form-row">
        <label>Duration</label>
        <div class="inline-selects">
          <select id="durH" class="form-control" aria-label="Hours">
            {% for h in range(0, 13) %}<option value="{{h}}">{{h}} h</option>{% endfor %}
          </select>
          <select id="durM" class="form-control" aria-label="Minutes">
            {% for m in (0,5,10,15,20,25,30,35,40,45,50,55) %}
              <option value="{{'%02d' % m}}">{{'%02d' % m}} m</option>
            {% endfor %}
          </select>
        </div>
        <!-- hidden field your backend reads as H:MM -->
        <input type="hidden" id="duration" name="duration" value="0:00">
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-primary">See what the wind was →</button>
      </div>
    </form>
  </div>
</div>

<script>
	(function () {
	  const hSel = document.getElementById('durH');
	  const mSel = document.getElementById('durM');
	  const hidden = document.getElementById('duration');
	  const form = hidden.closest('form');
	
	  function sync() {
		const h = parseInt(hSel.value, 10) || 0;
		const m = (mSel.value || '00').padStart(2, '0');
		hidden.value = `${h}:${m}`;        // "H:MM" for your backend
	  }
	
	  hSel.addEventListener('change', sync);
	  mSel.addEventListener('change', sync);
	  document.addEventListener('DOMContentLoaded', sync);
	  if (form) form.addEventListener('submit', sync);
	})();
	</script>
	
	
{% endblock %}
